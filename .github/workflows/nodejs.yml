# This workflow will do a clean install of node dependencies, build the source code and run tests
# across different versions of node
# For more information see:
# https://help.github.com/actions/language-and-framework-guides/using-nodejs-with-github-actions

name: Node.js CI

on:
  push:
    branches: dev
  pull_request:
    branches: dev

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v2 # If you're using actions/checkout@v2 you must set persist-credentials
        # to false in most cases for the deployment to work correctly.
      #        with:
      #          persist-credentials: false

      - name: Install and Build üîß # This example project is built using npm and outputs the
        # result to the 'build' folder. Replace with the commands required to build your project,
        # or remove this step entirely if your site is pre-built.
        run: |
          npm ci
          npm install
          npm run predeploy

      - name: Deploy üöÄ
        uses: JamesIves/github-pages-deploy-action@releases/v3
        with:
          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}
          BRANCH: gh-pages # The branch the action should deploy to.
          FOLDER: build # The folder the action should deploy.

#    steps:
#      - uses: actions/checkout@master
#      env:
#        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#      - name: Create GH Pages
#        uses: pkgjs/gh-pages@master
#        with:
#          nojekyll: false
#          build: |
#            npm ci
#            npm install
#            npm run predeploy
##            npm run deploy
#
#
#    #steps:
#    #  - uses: actions/checkout@v2
#    #  - name: Configure git credentials
#    #    uses: OleksiyRudenko/gha-git-credentials@v1
#    #    with:
#    #      token: ${{ secrets.GITHUB_TOKEN }}
#    #  - name: Use Node.js
#    #    uses: actions/setup-node@v1
#    #  - run: |
#    #      npm ci
#    #      npm install
#    #      npm run predeploy
#    #      npm run deploy
#      #env:
#      #  NODE_AUTH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
